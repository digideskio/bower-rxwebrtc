{"version":3,"sources":["module.js","webrtc.js","webrtcPreview.js"],"names":["angular","module","factory","$rootScope","webrtc","call","options","session","rxwebrtc","subscriptions","push","localStream","subscribe","stream","$broadcast","answer","directive","$scope","$element","attrs","video","tagName","Error","muted","autoplay","console","dir","src","URL","createObjectURL","$on","e","revokeObjectURL"],"mappings":"AAAA,YAAAA,SAAAC,OAAA,aCAAD,QAAAC,OAAA,UAAAC,QAAA,UAAA,aAAA,SAAAC,GACA,GAAAC,IACAC,KAAA,SAAAC,GACA,GAAAC,GAAAC,SAAAH,KAAAC,EAMA,OAJAC,GAAAE,cAAAC,KAAAH,EAAAI,YAAAC,UAAA,SAAAC,GACAT,EAAAO,YAAAE,EACAV,EAAAW,WAAA,oBAAAD,MAEAN,GAEAQ,OAAA,SAAAT,GACA,GAAAC,GAAAC,SAAAO,OAAAT,EACA,OAAAC,IAIA,OAAAH,MCjBAJ,QAAAC,OAAA,UAAAe,UAAA,iBAAA,SAAA,SAAAZ,GACA,MAAA,UAAAa,EAAAC,EAAAC,GACA,GAAAC,GAAAF,EAAA,EACA,IAAA,UAAAE,EAAAC,QACA,KAAA,IAAAC,OAAA,gEAEAF,GAAAG,OAAA,EACAH,EAAAI,UAAA,EACApB,EAAAO,cACAc,QAAAC,IAAAN,GACAA,EAAAO,IAAAC,IAAAC,gBAAAzB,EAAAO,cAEAM,EAAAa,IAAA,oBAAA,SAAAC,EAAAlB,GACAO,EAAAO,KACAC,IAAAI,gBAAAZ,EAAAO,KAEAP,EAAAO,IAAAC,IAAAC,gBAAAzB,EAAAO,eAEAM,EAAAa,IAAA,WAAA,WACAV,EAAAO,KACAC,IAAAI,gBAAAZ,EAAAO","file":"angular-webrtc.min.js","sourcesContent":["angular.module('webrtc', []);","angular.module('webrtc').factory('webrtc', function ($rootScope) {\n\tvar webrtc = {\n\t\tcall: function (options) {\n\t\t\tvar session = rxwebrtc.call(options);\n\t\t\t// Connect the getUserMedia steam with the <webrtc-preview> directive.\n\t\t\tsession.subscriptions.push(session.localStream.subscribe(function (stream) {\n\t\t\t\twebrtc.localStream = stream; \n\t\t\t\t$rootScope.$broadcast('webrtcLocalStream', stream);\n\t\t\t}));\n\t\t\treturn session;\n\t\t},\n\t\tanswer: function (options) {\n\t\t\tvar session = rxwebrtc.answer(options);\n\t\t\treturn session;\n\t\t}\n\t\t\n\t};\n\treturn webrtc;\n});","angular.module('webrtc').directive('webrtcPreview', function (webrtc) {\n\treturn function link($scope, $element, attrs) {\n\t\tvar video = $element[0];\n\t\tif (video.tagName !== 'VIDEO') {\n\t\t\tthrow new Error('The webrtc-preview directive must be placed on a VideoElement');\n\t\t}\n\t\tvideo.muted = true;\n\t\tvideo.autoplay = true;\n\t\tif (webrtc.localStream) {\n\t\t\tconsole.dir(video);\n\t\t\tvideo.src = URL.createObjectURL(webrtc.localStream);\n\t\t}\n\t\t$scope.$on('webrtcLocalStream', function (e, stream) {\n\t\t\tif (video.src) {\n\t\t\t\tURL.revokeObjectURL(video.src);\n\t\t\t}\n\t\t\tvideo.src = URL.createObjectURL(webrtc.localStream);\n\t\t});\n\t\t$scope.$on('$destroy', function () {\n\t\t\tif (video.src) {\n\t\t\t\tURL.revokeObjectURL(video.src);\n\t\t\t}\n\t\t})\n\t};\n});"],"sourceRoot":"/source/"}