{"version":3,"sources":["webpack:///webpack/bootstrap 85f2acaffed195b61b53","webpack:///./src/rxwebrtc.js","webpack:///external \"Rx\"","webpack:///./src/getUserMedia.js","webpack:///./src/Session.js"],"names":[],"mappings":"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","file":"rxwebrtc.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 85f2acaffed195b61b53\n **/","\nvar Rx = require('rx');\nvar getUserMedia = require('./getUserMedia');\nvar Session = require('./Session');;\n\nvar rxwebrtc = {\n\t\n\tdefaults: {\n\t\tpeerConnection: {\n\t\t\ticeServers:  [ \n\t\t\t\t{ urls: ['stun:stun.l.google.com:19302'] }\n\t\t\t]\n\t\t},\n\t\tuserMedia: { \n\t\t\tvideo: true, \n\t\t\taudio: true\n\t\t}\n\t},\n\t/**\n\t * Send message from sigaling server to this Rx.Subject \n\t */\n\tinput: new Rx.Subject(),\n\n\t/**\n\t * Emit messages from this Rx.Subject to the sigaling server\n\t */\n\toutput: new Rx.Subject(),\n\t\n\t/**\n\t * @return Session\n\t */\n\tcall: function (options) {\n\t\toptions = options || {};\n\n\t\toptions.userMedia || rxwebrtc.defaults.userMedia\n\t\toptions.peerConnection = options.peerConnection ||  rxwebrtc.defaults.peerConnection;\n\t\tvar session = new Session(options);\n\t\tconsole.log(session.peerConnection);\n\t\tvar close = Rx.Observable.fromEvent(session.peerConnection, 'iceconnectionstatechange')\n\t\t.pluck('target').pluck('iceConnectionState')\n\t\t.subscribe(function (connectionState) {\n\t\t\tif (connectionState === 'completed') {\n\t\t\t\tsession.status.onNext('CONNECTED');\n\t\t\t} else if (connectionState === 'disconnected'){\n\t\t\t\tsession.status.onNext('DISCONNECTED');\n\t\t\t\tsession.status.onCompleted();\n\t\t\t}\n\t\t});\n\t\tsession.subscriptions.push(close);\n\t\tsession.status.onNext('USER_MEDIA');\n\t\tvar call = rxwebrtc.getUserMedia(options.userMedia || rxwebrtc.defaults.userMedia).flatMap(function (stream) {\n\t\t\tsession.peerConnection.addStream(stream);\n\t\t\tsession.localStream.onNext(stream);\n\t\t\tsession.status.onNext('LOCAL_STREAM');\n\t\t\treturn rxwebrtc.createOffer(session.peerConnection)\n\t\t}).flatMap(function (offer) {\n\t\t\tsession.offer = offer;\n\t\t\tsession.status.onNext('OFFER');\n\t\t\tsession.peerConnection.setLocalDescription(offer); // Triggers ICE gathering\n\t\t\treturn rxwebrtc.gatherIceCandidates(session.peerConnection)\n\t\t}).flatMap(function (iceCandidates) {\n\t\t\tsession.status.onNext('ICE CANDIDATES: ' + iceCandidates.length);\n\t\t\trxwebrtc.output.onNext({\n\t\t\t\ttype: 'offer', \n\t\t\t\trecipient: options.recipient || {},\n\t\t\t\tsession: session.id,\n\t\t\t\toffer: session.offer,\n\t\t\t\ticeCandidates: iceCandidates\n\t\t\t});\n\t\t\tvar test = Rx.Observable.fromEvent(session.peerConnection, 'icecandidate').filter(function (e) {\n\t\t\t\treturn e.candidate;\n\t\t\t}).subscribe(function (e) {\n\t\t\t\tconsole.log('more ICE?', e.candidate);\n\t\t\t});\n\t\t\tsession.subscriptions.push(test);\n\t\t\t\n\t\t\tsession.status.onNext('CALLING');\n\t\t\treturn session.messages.filter(function (message) {\n\t\t\t\treturn message.type === 'answer'\n\t\t\t}).first();\n\t\t}).flatMap(function (message) {\n\t\t\tsession.status.onNext('ANSWERED');\n\t\t\tmessage.iceCandidates.forEach(function (ice) {\n\t\t\t\trxwebrtc.addIceCandidate(session.peerConnection, ice).subscribe();\n\t\t\t});\n\t\t\treturn rxwebrtc.setRemoteDescription(session.peerConnection, message.answer);\n\t\t}).flatMap(function () {\n\t\t\treturn session.remoteStream.first();\n\t\t}).subscribe(function (stream) {\n\t\t\tsession.status.onNext('CONNECTING');\n\t\t}, function (error) {\n\t\t\tsession.status.onError(error);\n\t\t});\n\t\tsession.subscriptions.push(call);\n\t\treturn session;\n\t},\n\t\n\tanswer: function (options) {\n\t\toptions = options || {};\n\t\toptions.userMedia || rxwebrtc.defaults.userMedia\n\t\toptions.peerConnection = options.peerConnection ||  rxwebrtc.defaults.peerConnection;\n\t\tvar session = new Session(options);\n\t\tsession.status.onNext('USER_MEDIA');\n\t\t\n\t\tvar subscription = rxwebrtc.getUserMedia(options.userMedia || rxwebrtc.defaults.userMedia).flatMap(function (stream) {\n\t\t\tsession.peerConnection.addStream(stream);\n\t\t\tsession.localStream.onNext(stream);\n\t\t\tsession.status.onNext('LOCAL_STREAM');\n\t\t\treturn rxwebrtc.setRemoteDescription(session.peerConnection, options.offer);\n\t\t}).flatMap(function (result) {\n\t\t\tsession.status.onNext('REMOTE');\n\t\t\tif (options.iceCandidates) {\n\t\t\t\toptions.iceCandidates.forEach(function (ice) {\n\t\t\t\t\trxwebrtc.addIceCandidate(session.peerConnection, ice).subscribe();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log(options)\n\t\t\t}\n\t\t\t\n\t\t\treturn rxwebrtc.createAnswer(session.peerConnection);\n\t\t}).flatMap(function (answer) {\n\t\t\tsession.answer = answer;\n\t\t\tsession.peerConnection.setLocalDescription(answer); // Triggers ICE gathering\n\t\t\treturn rxwebrtc.gatherIceCandidates(session.peerConnection);\n\t\t}).subscribe(function (iceCandidates) {\n\t\t\trxwebrtc.output.onNext({\n\t\t\t\ttype: 'answer', \n\t\t\t\trecipient: options.recipient || {},\n\t\t\t\tsession: session.id,\n\t\t\t\tanswer: session.answer,\n\t\t\t\ticeCandidates: iceCandidates\n\t\t\t});\n\t\t\tvar test = Rx.Observable.fromEvent(session.peerConnection, 'icecandidate').filter(function (e) {\n\t\t\t\treturn e.candidate;\n\t\t\t}).subscribe(function (e) {\n\t\t\t\tconsole.log('more ICE?', e.candidate);\n\t\t\t});\n\t\t\tsession.subscriptions.push(test);\n\t\t});\n\t\tsession.subscriptions.push(subscription);\n\t\treturn session;\n\t},\n\tgatherIceCandidates: function (peerConnection) {\n\t\treturn Rx.Observable.fromEvent(peerConnection, 'icecandidate').takeWhile(function (e) {\n\t\t\treturn e.candidate;\n\t\t}).map(function (e) {\n\t\t\treturn e.candidate;\n\t\t}).toArray()\n\t},\n\tcreateOffer: function (peerConnection) {\n\t\treturn Rx.Observable.create(function (observer) {\n\t\t\tpeerConnection.createOffer(function (sessionDescription) {\n\t\t\t\tobserver.onNext(sessionDescription);\n\t\t\t\tobserver.onCompleted();\n\t\t\t}, function (err) {\n\t\t\t\tobserver.onError(err);\n\t\t\t});\n\t\t});\n\t},\n\tcreateAnswer: function (peerConnection) {\n\t\treturn Rx.Observable.create(function (observer) {\n\t\t\tpeerConnection.createAnswer(function (sessionDescription) {\n\t\t\t\tobserver.onNext(sessionDescription);\n\t\t\t\tobserver.onCompleted();\n\t\t\t}, function (err) {\n\t\t\t\tobserver.onError(err);\n\t\t\t});\n\t\t});\n\t},\n\tsetRemoteDescription: function (peerConnection, sessionDescription) {\n\t\tvar RTCSessionDescription = window.RTCSessionDescription || cordova.plugins.iosrtc.RTCSessionDescription;\n\t\treturn Rx.Observable.create(function (observer) {\n\t\t\tpeerConnection.setRemoteDescription(new RTCSessionDescription(sessionDescription), function (result) {\n\t\t\t\tobserver.onNext(result);\n\t\t\t\tobserver.onCompleted();\n\t\t\t}, function (err) {\n\t\t\t\tobserver.onError(err);\n\t\t\t});\n\t\t});\n\t},\n\taddIceCandidate: function (peerConnection, iceCandidate) {\n\t\tvar RTCIceCandidate = window.RTCIceCandidate || cordova.plugins.iosrtc.RTCIceCandidate;\n\t\treturn Rx.Observable.create(function (observer) {\n\t\t\tpeerConnection.addIceCandidate(new RTCIceCandidate(iceCandidate), function (result) {\n\t\t\t\tobserver.onNext(result);\n\t\t\t\tobserver.onCompleted();\n\t\t\t}, function (err) {\n\t\t\t\tobserver.onError(err);\n\t\t\t});\n\t\t});\n\t},\n\tgetUserMedia: getUserMedia\n};\n\nwindow.rxwebrtc = rxwebrtc;\n\n\n/** WEBPACK FOOTER **\n ** ./src/rxwebrtc.js\n **/","module.exports = Rx;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Rx\"\n ** module id = 1\n ** module chunks = 0\n **/","var Rx = require('rx');\n/**\n * getUserMedia as an Observable\n *\n * @return Rx.Observable \n */\nfunction getUserMedia(options) {\n\tvar getUserMedia = navigator.webkitGetUserMedia ? navigator.webkitGetUserMedia.bind(navigator) : cordova.plugins.iosrtc.getUserMedia.bind(cordova.plugins.iosrtc);\n\treturn Rx.Observable.create(function (observer) {\n\t\tgetUserMedia(options, function (stream) {\n\t\t\tobserver.onNext(stream);\n\t\t\tobserver.onCompleted();\n\t\t}, function (err) {\n\t\t\tobserver.onError(err);\n\t\t});\n\t});\n}\n\t\t\nmodule.exports = getUserMedia;\n\n\n/** WEBPACK FOOTER **\n ** ./src/getUserMedia.js\n **/","var Rx = require('rx');\n/**\n * @implements Rx.Disposable\n */\nfunction Session (options) {\n\toptions = options || {};\n\tthis.isDisposed = false;\n\t\n\tif (options.id) {\n\t\tthis.id = options.id;\n\t} else {\n\t\tthis.id = Session.guid();\n\t}\n\tthis.status = new Rx.BehaviorSubject('NEW');\n\tvar RTCPeerConnection = window.webkitRTCPeerConnection || cordova.plugins.iosrtc.RTCPeerConnection;\n\tthis.peerConnection = new RTCPeerConnection(options.peerConnection);\n\tthis.remoteStream = Rx.Observable.fromEvent(this.peerConnection, 'addstream').pluck('stream');\n\tthis.localStream = new Rx.BehaviorSubject();\n\tthis.messages = rxwebrtc.input.filter(message => {\n\t\treturn message.session === this.id;\n\t});\n\tthis.subscriptions = [this.status, this.localStream];\n};\n\nSession.prototype.dispose = function() {\n\tif (this.isDisposed) {\n\t\treturn;\n\t}\n\tthis.isDisposed = true;\n\tthis.peerConnection.close(); \n\tthis.subscriptions.forEach(subscription => { subscription.dispose() });\n};\n\nSession.guid = function () {\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\tvar r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n\t\treturn v.toString(16);\n\t});\n};\n\nmodule.exports = Session;\n\n\n/** WEBPACK FOOTER **\n ** ./src/Session.js\n **/"],"sourceRoot":""}